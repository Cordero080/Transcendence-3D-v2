<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="https://unpkg.com/@csstools/normalize.css" rel="stylesheet" />

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="main.css" />
    <!-- Module shim (so import maps work everywhere) -->
    <script
      async
      src="https://unpkg.com/es-module-shims@1.10.0/dist/es-module-shims.js"
    ></script>

    <script type="module" src="app.js"></script>

    <title>Transcendence</title>
  </head>

  <body>
    <!-- Spectral Sine Wave Background Canvas -->
    <canvas
      id="spectralSineWaveBg"
      style="
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: 0;
        pointer-events: none;
      "
    ></canvas>
    <audio id="woosh" src="music/woosh.mp3" preload="auto"></audio>
    <audio id="bg-music" src="music/3dC_theme.mp3" autoplay loop></audio>
    <audio id="transcend-3" src="music/transcend_3.wav" preload="auto"></audio>
    <audio id="evolve_effect_2" src="music/evolve_effect.wav"></audio>
    <audio id="transcend-4" src="music/transcend_4.wav" preload="auto"></audio>
    <audio id="evolution-sound" src="music/evolution.wav" preload="auto">
      <source src="music/evolution.wav" type="audio/wav" />
    </audio>
    <audio id="egg-hatch" src="music/egg_hatch.wav" preload="auto"></audio>
    <audio
      id="space-engine"
      src="music/space_engine.wav"
      preload="auto"
    ></audio>
    <audio id="stutterMask" src="music/stutterMask.wav" preload="auto"></audio>

    <!-- Page overlay - dims everything until Start is clicked -->
    <div id="pageOverlay" class="page-overlay">
      <div class="overlay-content">
        <h2>üéÆ Welcome to Transcendence! üéÆ</h2>
        <p>
          <span class="word">A</span>
          <span class="word">virtual</span>
          <span class="word">lifeform</span>
          <span class="word">is</span>
          <span class="word">waiting</span>
          <span class="word">to hatch</span>
          <span class="word">from</span>
          <span class="word">its</span>
          <span class="word">shell</span>
          <span class="word">to</span>
          <span class="word">evolve</span>
          <span class="word">beyond</span>
          <span class="word">time</span>
          <span class="word">and</span>
          <span class="word">form.</span>
        </p>
        <p>
          <span class="word">Feed,</span>
          <span class="word">dance,</span>
          <span class="word">sleep,</span>
          <span class="word">have fun,</span>
          <span class="word">evolve</span>
          <span class="word">and</span>
        </p>
        <p>
          <span class="word">transcend.</span>
        </p>
        <button class="OverlayStartButton" id="overlayStartButton">
          START GAME
        </button>
      </div>
    </div>

    <div class="scaling-root">
      <!-- transcendence was here -->

      <header>
        <h1>TAMAGOTCHI</h1>
      </header>
      <!-- I gave main-wrapper an id, but it is still main, following David's example, although he didn't assign an id to it -->
      <main id="main-wrapper">
        <button class="CornerRoundButton" id="infoDropdownBtn">&#9776;</button>
        <div class="dropdown-container">
          <!-- Dropdown menu (hidden by default) -->
          <div
            id="infoDropdownMenu"
            class="dropdown-menu"
            style="display: none"
          >
            <ul>
              <li><strong>How to Transcend:</strong></li>
              <li>Feed your pet when it hungers.</li>
              <li>Dance to energize and uplift its spirits</li>
              <li>Let it rest when it tires.</li>
              <li>
                Train its body to unify body, mind and spirit, bringing his
                life-force into balance.
              </li>
              <li>
                Stay balanced - joy, rest, physical training, and nourishment
                and your compassion are the keys.
              </li>
              <li>Each stage brings new color, emotional stage and form.</li>
              <li>
                Final form leads to transcendence - the end of a cylce in this
                dimension, and on to a higher one.
              </li>
              <li>Press START to begin, RESET to start over</li>
            </ul>
          </div>
        </div>

        <span id="transcendence">TRANSCENDENCE</span>

        <!-- Sonic gif - hidden initially, shown after start button -->

        <!-- pet parent is the "screen" compared to D's ie. -->

        <div id="pet-container">
          <!-- Colorful glitch animation container - shown by default -->
          <div id="colorfulGlitchDiv" class="colorful-glitch-container">
            <div class="colorful-glitch-text">In Utero</div>
            <div class="colorful-glitch-overlay"></div>
            <div class="colorful-glitch-particles"></div>
            <div class="colorful-glitch-border"></div>
          </div>

          <!-- Glitch stutter overlay for animation transitions -->
          <div id="glitchStutterOverlay" class="glitch-stutter-overlay">
            <div class="stutter-scanlines"></div>
            <div class="stutter-static"></div>
            <div class="stutter-flash"></div>
          </div>

          <!-- Second glitch overlay layer with inverted colors -->
          <div
            id="glitchStutterOverlay2"
            class="glitch-stutter-overlay glitch-inverted"
          >
            <div class="stutter-scanlines"></div>
            <div class="stutter-static"></div>
            <div class="stutter-flash"></div>
          </div>
        </div>
        <div class="infoBox">
          <div class="infoBox-controls">
            <div class="button-container">
              <button class="Buttons feed-btn" id="feed-button">FEED</button>
              <div class="timer-display" id="hungerTimer">Hunger: 0</div>
            </div>
            <div class="button-container">
              <button class="Buttons dance-btn" id="dance-button">DANCE</button>
              <div class="timer-display" id="funTimer">Fun: 10</div>
            </div>
            <div class="button-container">
              <button class="Buttons sleep-btn" id="sleep-button">SLEEP</button>
              <div class="timer-display" id="sleepTimer">Zzz: 0</div>
            </div>
            <div class="button-container">
              <button class="Buttons train-btn" id="power-button">TRAIN</button>
              <div class="timer-display" id="powerTimer">Power: 10</div>
            </div>
          </div>

          <div class="infoBox_petChat">Hello! turns out I'm your new pet!</div>
        </div>
      </main>

      <!-- scaling root end -->
      <!-- Game Over Overlay -->

      <div id="gameOverOverlay" class="game-over-overlay" style="display: none">
        <div class="game-over-content">
          <h2 class="glitch-text">GAME OVER</h2>
          <p id="gameOverReason">Your pet has transcended...</p>
          <div class="game-over-buttons">
            <button class="game-over-button" id="tryAgainBtn">TRY AGAIN</button>
          </div>
        </div>
      </div>

      <!-- Win / Transcendence Overlay -->
      <div id="winOverlay" class="game-over-overlay" style="display: none">
        <div class="game-over-content">
          <h2 id="transcendence">TRANSCENDENCE</h2>
          <p id="winReason">Your pet has transcended...</p>
          <div class="game-over-buttons"></div>
        </div>
      </div>

      <!-- ‚úÖ Transcendence Win Overlay -->
      <div id="transcendenceOverlay" class="overlay" style="display: none">
        <div class="transcendence-overlay-content">
          <h2 class="transcendence-title gradient-text">TRANSCENDENCE</h2>
          <p class="transcendence-message gradient-text">
            ‚ú®üëÅ TRANSCENDENCE COMPLETE üëÅ‚ú®<br />
            Your pet has mastered the art of care and transcended beyond
            existence.<br />
            The ultimate evolution has been achieved through perfect balance.
          </p>
          <button id="playAgainBtn" class="btn-play-again">
            <span class="gradient-text">PLAY AGAIN</span>
          </button>
        </div>
      </div>

      <div class="startButtonContainer">
        <button class="StartButton">START</button>
        <button class="ResetButton">RESET</button>
        <!-- scaling root end -->
      </div>
    </div>
    <!-- Full-screen Cyberpunk Transition Overlay -->

</div>
  </body>
</html>
