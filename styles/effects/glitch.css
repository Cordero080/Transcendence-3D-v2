/* ============================================================================
   GLITCH EFFECTS - Death, Evolution, and General Glitch Animations
   ============================================================================ */

/* Base glitch overlay - used for death and evolution effects */
.glitch-effect {
  position: absolute;
  mix-blend-mode: screen;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 480px; /* Reduced from 600px */
  height: 160px; /* Reduced from 200px */
  pointer-events: none;
  opacity: 0;
  z-index: 15;
  overflow: hidden;
  background: transparent;
  transition: opacity 0.20s ease-out, width 0.20s ease-out, height 0.20s ease-out;
  border-radius: 50%; /* Make it more oval/rounded */
  /* Dynamic cat shape using radial gradient with smoother edges */
  background: radial-gradient(ellipse 35% 45% at 50% 80%, 
    rgba(95, 226, 247, 0.632) 0%,
    rgba(226, 35, 252, 0.8) 50%,
    rgba(241, 165, 251, 0.4) 65%,
    transparent 80%
  );
  /* Cat ears - smaller and smoother */
  background-image: 
    radial-gradient(ellipse 12% 16% at 35% 25%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.3) 60%, transparent 80%),
    radial-gradient(ellipse 12% 16% at 65% 25%, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.3) 60%, transparent 80%);
  /* Smoother mask with extended fade */
  -webkit-mask: 
    radial-gradient(ellipse 35% 45% at 50% 45%, black 0%, black 50%, rgba(0,0,0,0.7) 65%, transparent 80%),
    radial-gradient(ellipse 12% 16% at 35% 25%, black 0%, rgba(0,0,0,0.5) 60%, transparent 80%),
    radial-gradient(ellipse 12% 16% at 65% 25%, black 0%, rgba(0,0,0,0.5) 60%, transparent 80%);
  mask: 
    radial-gradient(ellipse 35% 45% at 50% 45%, oklch(8.063% 0.03707 328.352) 0%, black 50%, rgba(0,0,0,0.7) 65%, transparent 80%),
    radial-gradient(ellipse 12% 16% at 35% 25%, rgb(22, 1, 28) 0%, rgba(0,0,0,0.5) 60%, transparent 80%),
    radial-gradient(ellipse 12% 16% at 65% 25%, black 0%, rgba(0,0,0,0.5) 60%, transparent 80%);
}

.glitch-effect.active {
  opacity: 1;
  width: 5280px; /* Increased width for animation transitions (10% increase from 4800px) */
  animation: stutterFlicker 0.15s linear, dynamicCatGlitch 0.3s ease-in-out;
}

/* Enhanced evolution effect */
.glitch-effect.active.evolution {
  opacity: 1;
  animation: 
    cyberpunkEvolutionGlow 6s ease-in-out,
    evolutionParticles 0.5s ease-in-out infinite,
    evolutionShimmer 1s ease-in-out infinite;
  background: radial-gradient(ellipse 60% 70% at 50% 45%, 
    rgba(5, 45, 155, 0.9) 0%,
    rgba(255, 0, 255, 0.8) 30%,
    rgba(255, 255, 0, 0.7) 60%,
    rgba(90, 5, 208, 0.854) 80%,
    transparent 100%
  );
  background-image: 
    radial-gradient(circle 8px at 25% 30%, rgba(255, 0, 255, 1) 0%, transparent 50%),
    radial-gradient(circle 6px at 75% 25%, rgb(5, 124, 171) 0%, transparent 50%),
    radial-gradient(circle 10px at 35% 70%, rgb(187, 187, 10) 0%, transparent 50%),
    radial-gradient(circle 7px at 65% 75%, rgb(11, 173, 92) 0%, transparent 50%),
    radial-gradient(circle 5px at 85% 50%, rgba(255, 128, 0, 1) 0%, transparent 50%),
    radial-gradient(circle 9px at 15% 60%, rgba(128, 0, 255, 1) 0%, transparent 50%);
}

/* ============ âš¡ INVERTED GLITCH OVERLAY (LAYER 2) ============ */
.glitch-effect.glitch-inverted {
  z-index: 5; /* Above the first layer */
  transform: translate(-50%, -50%) scale(0.75); /* Slightly reduced for smoother edges */
  border-radius: 50%; /* Make it more oval/rounded */
  /* Smoother inverted background with extended fade */
  background: radial-gradient(ellipse 35% 45% at 50% 45%, 
    rgba(141, 3, 248, 0.902) 0%,
    rgba(0, 0, 0, 0.8) 50%,
    rgba(0, 0, 0, 0.4) 65%,
    transparent 80%
  );
  /* Inverted cat ears - smaller and smoother */
  background-image: 
    radial-gradient(ellipse 12% 16% at 35% 25%, rgba(38, 2, 23, 0.9) 0%, rgba(38, 2, 23, 0.3) 60%, transparent 80%),
    radial-gradient(ellipse 12% 16% at 70% 25%, rgba(10, 2, 42, 0.9) 0%, rgba(10, 2, 42, 0.3) 60%, transparent 80%); 
  filter: invert(1) hue-rotate(180deg);
}

.glitch-effect.glitch-inverted.active {
  opacity: 1;
  animation: stutterFlickerInverted 0.18s linear, dynamicCatGlitchInverted 0.12s ease-in-out;
}

.glitch-effect.glitch-inverted.active.evolution {
  opacity: 1;
  animation: 
    cyberpunkEvolutionGlowInverted 6s ease-in-out,
    evolutionParticlesInverted 0.6s ease-in-out infinite,
    evolutionShimmerInverted 1.2s ease-in-out infinite;
  background: radial-gradient(ellipse 60% 70% at 50% 45%, 
    oklch(66.024% 0.18785 250.198 / 0.902) 0%,
    oklch(86.645% 0.29481 142.511 / 0.8) 30%,
    oklch(45.203% 0.3133 264.073 / 0.7) 60%,
    oklch(66.124% 0.27741 348.534 / 0.733) 80%,
    transparent 100%
  );
  background-image: 
    radial-gradient(circle 6px at 30% 35%, rgba(1, 176, 182, 0.932) 0%, transparent 50%),
    radial-gradient(circle 8px at 70% 30%, rgba(255, 0, 0, 1) 0%, transparent 50%),
    radial-gradient(circle 7px at 40% 65%, rgb(102, 0, 255) 0%, transparent 50%),
    radial-gradient(circle 9px at 60% 70%, rgba(255, 0, 127, 1) 0%, transparent 50%),
    radial-gradient(circle 7px at 80% 45%, rgba(0, 127, 255, 1) 0%, transparent 50%),
    radial-gradient(circle 6px at 20% 55%, rgb(0, 255, 149) 0%, transparent 50%);
}

/* ============ ðŸŽ¯ GLITCH CHILD ELEMENTS ============ */
.stutter-scanlines {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 1px,
    rgba(255, 0, 255, 0.6) 1px,
    rgba(255, 0, 255, 0.6) 3px,
    transparent 3px,
    transparent 5px,
    rgba(0, 255, 255, 0.5) 5px,
    rgba(0, 255, 255, 0.5) 7px,
    transparent 7px,
    transparent 9px,
    rgba(0, 255, 8, 0.4) 9px,
    rgba(255, 191, 0, 0.4) 11px
  );
  animation: stutterScan 0.08s linear infinite;
  mix-blend-mode: screen;
}

.stutter-static {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><defs><filter id="noise"><feTurbulence baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/></filter></defs><rect width="100%" height="100%" filter="url(%23noise)" opacity="0.6"/></svg>');
  animation: stutterStatic 0.07s linear infinite;
  mix-blend-mode: overlay;
}

.stutter-flash {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    45deg,
    rgba(187, 89, 253, 0.931) 0%,
    rgba(255, 0, 255, 0.7) 25%,
    rgba(0, 255, 255, 0.731) 50%,
    rgba(255, 255, 0, 0.5) 75%,
    rgba(123, 203, 196, 0.4) 100%
  );
  animation: stutterFlash 0.1s ease-out;
  mix-blend-mode: color-dodge;
}

/* Inverted scanlines */
.glitch-effect.glitch-inverted .stutter-scanlines {
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 1px,
    rgba(0, 255, 0, 0.6) 1px,
    rgba(0, 255, 0, 0.6) 3px,
    transparent 3px,
    transparent 5px,
    rgba(255, 204, 0, 0.575) 5px,
    rgba(255, 0, 0, 0.5) 7px,
    transparent 7px,
    transparent 9px,
    rgba(0, 0, 255, 0.4) 9px,
    rgba(106, 0, 255, 0.4) 11px
  );
  animation: stutterScanInverted 0.1s linear infinite;
  mix-blend-mode: multiply;
}

/* Inverted static */
.glitch-effect.glitch-inverted .stutter-static {
  filter: invert(1);
  animation: stutterStaticInverted 0.06s linear infinite;
  mix-blend-mode: difference;
}

/* Inverted flash */
.glitch-effect.glitch-inverted .stutter-flash {
  background: linear-gradient(
    -45deg,
    rgba(107, 9, 50, 0.9) 0%,
    rgba(0, 255, 0, 0.7) 25%,
    rgba(255, 0, 0, 0.6) 50%,
    rgba(0, 0, 255, 0.5) 75%,
    rgba(5, 27, 82, 0.4) 100%
  );
  animation: stutterFlashInverted 0.12s ease-out;
  mix-blend-mode: exclusion;
}

/* ============================================================================
   GLITCH KEYFRAME ANIMATIONS
   ============================================================================ */

/* Inverted animations */
@keyframes stutterFlickerInverted {
  0% { opacity: 1; }
  15% { opacity: 0; }
  25% { opacity: 1; }
  35% { opacity: 0; }
  70% { opacity: 1; }
  55% { opacity: 0; }
  65% { opacity: 1; }
  75% { opacity: 0; }
  85% { opacity: 1; }
  100% { opacity: 0; }
}

@keyframes stutterScanInverted {
  0% { transform: translateY(100%); }
  100% { transform: translateY(-100%); }
}

@keyframes stutterStaticInverted {
  0% { transform: translate(0, 0) scale(1.1); }
  25% { transform: translate(-2px, 2px) scale(0.95); }
  50% { transform: translate(2px, -1px) scale(1.09); }
  75% { transform: translate(-1px, -2px) scale(0.9); }
  100% { transform: translate(1px, 1px) scale(1); }
}

@keyframes stutterFlashInverted {
  0% { opacity: 0; transform: scale(1.2); }
  50% { opacity: 1; transform: scale(0.8); }
  100% { opacity: 0; transform: scale(1); }
}

@keyframes dynamicCatGlitchInverted {
  0% { filter: invert(1) hue-rotate(180deg) contrast(150%) brightness(80%); }
  25% { filter: invert(1) hue-rotate(200deg) contrast(120%) brightness(120%); }
  50% { filter: invert(1) hue-rotate(160deg) contrast(180%) brightness(60%); }
  75% { filter: invert(1) hue-rotate(220deg) contrast(110%) brightness(140%); }
  100% { filter: invert(1) hue-rotate(180deg) contrast(100%) brightness(100%); }
}

@keyframes cyberpunkEvolutionGlowInverted {
  0% { filter: invert(1) hue-rotate(180deg) brightness(100%) saturate(100%); }
  20% { filter: invert(1) hue-rotate(200deg) brightness(150%) saturate(200%); }
  40% { filter: invert(1) hue-rotate(160deg) brightness(80%) saturate(300%); }
  60% { filter: invert(1) hue-rotate(220deg) brightness(200%) saturate(150%); }
  80% { filter: invert(1) hue-rotate(140deg) brightness(60%) saturate(250%); }
  100% { filter: invert(1) hue-rotate(180deg) brightness(100%) saturate(100%); }
}

@keyframes evolutionParticlesInverted {
  0% { transform: translate(-50%, -50%) scale(0.85) rotate(0deg); }
  50% { transform: translate(-50%, -50%) scale(0.9) rotate(180deg); }
  100% { transform: translate(-50%, -50%) scale(0.85) rotate(360deg); }
}

@keyframes evolutionShimmerInverted {
  0% { opacity: 0.8; }
  50% { opacity: 1; }
  100% { opacity: 0.8; }
}

/* Base animations */
@keyframes stutterFlicker {
  0% { opacity: 0; }
  10% { opacity: 1; }
  20% { opacity: 0; }
  30% { opacity: 1; }
  40% { opacity: 0; }
  50% { opacity: 1; }
  60% { opacity: 0; }
  70% { opacity: 1; }
  80% { opacity: 0; }
  90% { opacity: 1; }
  100% { opacity: 0; }
}

@keyframes stutterScan {
  0% { transform: translateY(-100%); }
  100% { transform: translateY(100%); }
}

@keyframes stutterStatic {
  0% { transform: translate(0, 0) scale(1); }
  20% { transform: translate(-2px, 1px) scale(1.01); }
  40% { transform: translate(1px, -1px) scale(0.99); }
  60% { transform: translate(-1px, 0px) scale(1.02); }
  80% { transform: translate(2px, -2px) scale(0.98); }
  100% { transform: translate(0, 0) scale(1); }
}

@keyframes stutterFlash {
  0% { 
    opacity: 0; 
    transform: scale(1) skew(0deg, 0deg);
  }
  25% { 
    opacity: 0.8; 
    transform: scale(1.05) skew(2deg, 1deg);
  }
  50% { 
    opacity: 0.6; 
    transform: scale(0.95) skew(-1deg, 2deg);
  }
  75% { 
    opacity: 0.4; 
    transform: scale(1.02) skew(1deg, -1deg);
  }
  100% { 
    opacity: 0; 
    transform: scale(1) skew(0deg, 0deg);
  }
}

@keyframes dynamicCatGlitch {
  0% { 
    transform: translate(-50%, -50%) scale(1) skew(0deg, 0deg);
    filter: hue-rotate(0deg);
  }
  25% { 
    transform: translate(-52%, -48%) scale(1.02) skew(1deg, 0.5deg);
    filter: hue-rotate(90deg);
  }
  50% { 
    transform: translate(-48%, -52%) scale(0.98) skew(-0.5deg, 1deg);
    filter: hue-rotate(180deg);
  }
  75% { 
    transform: translate(-51%, -49%) scale(1.01) skew(0.5deg, -0.5deg);
    filter: hue-rotate(270deg);
  }
  100% { 
    transform: translate(-50%, -50%) scale(1) skew(0deg, 0deg);
    filter: hue-rotate(360deg);
  }
}

/* ============ âš¡ CYBERPUNK EVOLUTION EFFECT KEYFRAMES ============ */
@keyframes cyberpunkEvolutionGlow {
  0% { 
    transform: translate(-50%, -50%) scale(1);
    filter: brightness(100%) contrast(100%) saturate(100%);
  }
  10% { 
    transform: translate(-50%, -50%) scale(1.1);
    filter: brightness(200%) contrast(150%) saturate(200%) hue-rotate(60deg);
  }
  20% { 
    transform: translate(-50%, -50%) scale(0.9);
    filter: brightness(300%) contrast(200%) saturate(300%) hue-rotate(120deg);
  }
  30% { 
    transform: translate(-50%, -50%) scale(1.2);
    filter: brightness(400%) contrast(250%) saturate(400%) hue-rotate(180deg);
  }
  50% { 
    transform: translate(-50%, -50%) scale(1.05);
    filter: brightness(500%) contrast(300%) saturate(500%) hue-rotate(240deg);
  }
  70% { 
    transform: translate(-50%, -50%) scale(1.15);
    filter: brightness(600%) contrast(350%) saturate(600%) hue-rotate(300deg);
  }
  90% { 
    transform: translate(-50%, -50%) scale(1.3);
    filter: brightness(700%) contrast(400%) saturate(700%) hue-rotate(360deg);
  }
  100% { 
    transform: translate(-50%, -50%) scale(1);
    filter: brightness(100%) contrast(100%) saturate(100%);
  }
}

@keyframes evolutionParticles {
  0% { 
    background-position: 0% 0%, 10% 10%, 20% 20%, 30% 30%, 40% 40%, 50% 50%;
    opacity: 0.8;
  }
  25% { 
    background-position: 5% -5%, 15% 5%, 25% 15%, 35% 25%, 45% 35%, 55% 45%;
    opacity: 1;
  }
  50% { 
    background-position: -5% 5%, 5% 15%, 15% 25%, 25% 35%, 35% 45%, 45% 55%;
    opacity: 0.9;
  }
  75% { 
    background-position: 2% -2%, 12% 8%, 22% 18%, 32% 28%, 42% 38%, 52% 48%;
    opacity: 1;
  }
  100% { 
    background-position: 0% 0%, 10% 10%, 20% 20%, 30% 30%, 40% 40%, 50% 50%;
    opacity: 0.8;
  }
}

@keyframes evolutionShimmer {
  0% { 
    box-shadow: 
      0 0 20px rgba(0, 255, 255, 0.5),
      0 0 40px rgba(255, 0, 255, 0.4),
      0 0 60px rgba(255, 255, 0, 0.3);
  }
  33% { 
    box-shadow: 
      0 0 30px rgba(255, 0, 255, 0.6),
      0 0 50px rgba(255, 255, 0, 0.5),
      0 0 70px rgba(0, 255, 128, 0.4);
  }
  66% { 
    box-shadow: 
      0 0 25px rgba(255, 255, 0, 0.7),
      0 0 45px rgba(0, 255, 128, 0.6),
      0 0 65px rgba(0, 255, 255, 0.5);
  }
  100% { 
    box-shadow: 
      0 0 20px rgba(0, 255, 255, 0.5),
      0 0 40px rgba(255, 0, 255, 0.4),
      0 0 60px rgba(255, 255, 0, 0.3);
  }
}
